import{k as Y,X as K,Y as W,r as m,e as S,a as X,l as i,J as l,z as v,A as t,L as n,C as o,B as y,y as M,q as H,m as Z,F as f,G as h,p as tt}from"./vendor-CqXe5Vco.js";import{b as et,_ as r,d as F,a as st}from"./index-D07s5EKd.js";import{u as at}from"./datasets-Bt4WZcQM.js";import{_ as b}from"./StatCard.vue_vue_type_script_setup_true_lang-DCRGtXQu.js";import{_ as N}from"./ChartCard.vue_vue_type_script_setup_true_lang-zQWhgYwN.js";import{_ as lt}from"./DoughnutChart.vue_vue_type_script_setup_true_lang-Da8YI0bv.js";import"./utils-DWA4hw-v.js";import"./charts-DqDWejEF.js";const ot={class:"p-6 max-w-7xl mx-auto"},it={key:0,class:"flex items-center justify-center h-64"},nt={class:"text-center"},dt={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-6"},rt={class:"flex items-center"},ct={class:"text-red-700 mt-1"},ut={key:2,class:"space-y-8"},mt={class:"medical-card"},xt={class:"flex items-center justify-between mb-6"},pt={class:"flex items-center space-x-4"},_t={class:"p-3 bg-purple-100 rounded-lg"},vt={class:"text-3xl font-bold text-gray-900 flex items-center"},gt={key:0,class:"ml-3 px-2 py-1 bg-green-100 text-green-800 text-sm rounded-full"},yt={key:1,class:"ml-3 px-2 py-1 bg-yellow-100 text-yellow-800 text-sm rounded-full"},ft={class:"text-gray-600 mt-1"},ht={class:"flex items-center space-x-4 mt-2"},bt={class:"text-sm text-gray-500"},wt={class:"text-sm text-gray-500"},kt={class:"text-sm text-gray-500"},Dt={class:"text-sm text-gray-500"},Ct={class:"flex space-x-3"},St=["disabled"],Ft=["disabled"],At=["disabled"],Vt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},Bt={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},$t={key:1,class:"p-8 text-center"},Mt={class:"p-4"},Nt={class:"space-y-4"},jt={class:"flex items-center justify-between"},Tt={class:"flex items-center justify-between"},Lt={class:"text-sm text-gray-900"},Ut={class:"flex items-center justify-between"},Et={class:"text-sm text-gray-900"},Pt={key:0,class:"mt-6 pt-4 border-t border-gray-200"},qt={class:"space-y-2"},zt={class:"text-gray-700"},It={class:"mt-6 pt-4 border-t border-gray-200"},Ot={class:"space-y-2"},Qt={class:"flex items-center text-sm"},Rt={class:"text-gray-700"},Gt={class:"flex items-center text-sm"},Jt={class:"text-gray-700"},Yt={key:0,class:"medical-card"},Kt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Wt={class:"flex items-center justify-between"},Xt={class:"font-medium text-gray-900"},Ht={class:"text-sm text-gray-500"},Zt={class:"mt-2"},te={class:"w-full bg-gray-200 rounded-full h-2"},ee={class:"medical-card"},se={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ae=["disabled"],le={class:"medical-card"},oe={class:"medical-card-header"},ie={class:"flex items-center justify-between"},ne={class:"flex items-center space-x-4"},de={class:"text-sm text-gray-500"},re={key:0,class:"flex items-center justify-center h-32"},ce={key:1,class:"overflow-x-auto"},ue={class:"min-w-full divide-y divide-gray-200"},me={class:"bg-white divide-y divide-gray-200"},xe={class:"px-6 py-4"},pe={class:"max-w-md"},_e={class:"text-sm font-medium text-gray-900 line-clamp-2"},ve={class:"text-sm text-gray-500 line-clamp-2 mt-1"},ge={class:"px-6 py-4"},ye={class:"flex flex-wrap gap-1"},fe={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-600"},he={class:"px-6 py-4 text-sm text-gray-900"},be={class:"px-6 py-4 text-sm text-gray-900"},we={class:"px-6 py-4 text-sm font-medium"},ke=["onClick"],De={key:2,class:"text-center py-8"},Ce=Y({__name:"DatasetDetail",props:{id:{}},setup(j){const w=j,T=K(),x=et(),L=at(),{datasets:U}=W(L),s=m(null),c=m([]),u=m(!0),k=m(!1),g=m(null),p=m(10),E=S(()=>c.value.slice(0,p.value)),A=S(()=>{if(!s.value?.domain_distribution)return{labels:[],datasets:[{data:[]}]};const a=s.value.domain_distribution,e=Object.keys(a),d=Object.values(a);return e.length===0?{labels:[],datasets:[{data:[]}]}:{labels:e.map(C),datasets:[{data:d,backgroundColor:["#8B5CF6","#EF4444","#10B981","#F59E0B","#3B82F6","#EC4899","#84CC16","#F97316","#06B6D4","#6366F1"],borderWidth:1,borderColor:"#fff"}]}}),P=S(()=>({plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0}}},responsive:!0,maintainAspectRatio:!1})),D=async()=>{u.value=!0,g.value=null;try{let a=U.value.find(e=>e.id===w.id);a||(a=await F.getDataset(w.id)),s.value=a,await q()}catch(a){g.value=a instanceof Error?a.message:"Failed to load dataset",console.error("Failed to load dataset:",a)}finally{u.value=!1}},q=async()=>{if(s.value){k.value=!0;try{const a=await F.getDatasetSamples(s.value.id,1,50);c.value=a.results||a.items||[]}catch(a){console.error("Failed to load samples:",a)}finally{k.value=!1}}},z=()=>{p.value=Math.min(p.value+10,c.value.length)},V=a=>a?a<1?`${Math.round(a*1024)} KB`:a<1024?`${a.toFixed(1)} MB`:`${(a/1024).toFixed(1)} GB`:"Unknown",I=a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),C=a=>a.charAt(0).toUpperCase()+a.slice(1).replace(/_/g," "),O=a=>s.value?.domain_distribution&&s.value.domain_distribution[a]||0,Q=a=>{if(!s.value?.domain_distribution||!s.value.total_samples)return 0;const e=s.value.domain_distribution[a]||0;return Math.round(e/s.value.total_samples*100)},B=async()=>{if(s.value){u.value=!0;try{await F.validateDataset(s.value.id),x.success("Dataset validation started"),setTimeout(()=>D(),2e3)}catch(a){x.error("Failed to start validation"),console.error("Validation error:",a)}finally{u.value=!1}}},$=()=>{T.push(`/models/create?dataset=${w.id}`)},R=()=>{x.info("Download functionality coming soon")},G=()=>{x.info("Export functionality coming soon")},J=a=>{x.info(`Viewing sample: ${a.title}`)};return X(D),(a,e)=>(l(),i("div",ot,[u.value?(l(),i("div",it,[t("div",nt,[n(r,{name:"clock",class:"w-8 h-8 text-blue-500 mx-auto mb-2 animate-spin"}),e[0]||(e[0]=t("p",{class:"text-gray-600"},"Loading dataset details...",-1))])])):g.value?(l(),i("div",dt,[t("div",rt,[n(r,{name:"warning",class:"w-5 h-5 text-red-600 mr-2"}),e[1]||(e[1]=t("h3",{class:"text-red-800 font-medium"},"Error Loading Dataset",-1))]),t("p",ct,o(g.value),1),t("button",{onClick:D,class:"mt-3 text-red-600 hover:text-red-800 text-sm underline"}," Try Again ")])):s.value?(l(),i("div",ut,[t("div",mt,[t("div",xt,[t("div",pt,[t("div",_t,[n(r,{name:"database",class:"w-8 h-8 text-purple-600"})]),t("div",null,[t("h1",vt,[y(o(s.value.name)+" ",1),s.value.is_validated?(l(),i("span",gt,"✓ Validated")):(l(),i("span",yt,"⚠ Not Validated"))]),t("p",ft,o(s.value.description||"No description provided"),1),t("div",ht,[t("span",bt,o(s.value.total_samples||0)+" samples",1),t("span",wt,o(V(s.value.file_size_mb)),1),t("span",kt,o(s.value.file_extension?.toUpperCase()||"Unknown")+" format",1),t("span",Dt,"Uploaded "+o(I(s.value.uploaded_at)),1)])])]),t("div",Ct,[t("button",{class:"btn-secondary",onClick:R,disabled:!s.value.file_size_mb},[n(r,{name:"document",class:"w-4 h-4 mr-2"}),e[2]||(e[2]=y(" Download ",-1))],8,St),t("button",{class:"btn-secondary",onClick:B,disabled:u.value},[n(r,{name:"success",class:"w-4 h-4 mr-2"}),e[3]||(e[3]=y(" Validate ",-1))],8,Ft),t("button",{class:"btn-primary",onClick:$,disabled:!s.value.is_validated},[n(r,{name:"brain",class:"w-4 h-4 mr-2"}),e[4]||(e[4]=y(" Train Model ",-1))],8,At)])])]),t("div",Vt,[n(b,{label:"Total Samples",value:s.value.total_samples||0,icon:"list",color:"blue"},null,8,["value"]),n(b,{label:"Medical Domains",value:s.value.medical_domains?.length||0,icon:"chart-bar",color:"purple"},null,8,["value"]),n(b,{label:"Avg Title Length",value:s.value.avg_title_length?`${Math.round(s.value.avg_title_length)} chars`:"N/A",icon:"document",color:"green"},null,8,["value"]),n(b,{label:"Avg Abstract Length",value:s.value.avg_abstract_length?`${Math.round(s.value.avg_abstract_length)} chars`:"N/A",icon:"document",color:"yellow"},null,8,["value"])]),t("div",Bt,[n(N,{title:"Medical Domain Distribution",loading:!1},{default:M(()=>[A.value?.datasets?.[0]?.data?.length?(l(),H(lt,{key:0,data:A.value,options:P.value,height:300},null,8,["data","options"])):(l(),i("div",$t,[n(r,{name:"chart-bar",class:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e[5]||(e[5]=t("p",{class:"text-gray-500"},"No domain distribution data available",-1))]))]),_:1}),n(N,{title:"Data Quality Status",loading:!1},{default:M(()=>[t("div",Mt,[t("div",Nt,[t("div",jt,[e[6]||(e[6]=t("span",{class:"text-sm font-medium text-gray-700"},"Validation Status",-1)),t("span",{class:Z(["text-sm font-medium",s.value.is_validated?"text-green-600":"text-yellow-600"])},o(s.value.is_validated?"Validated":"Pending Validation"),3)]),t("div",Tt,[e[7]||(e[7]=t("span",{class:"text-sm font-medium text-gray-700"},"File Format",-1)),t("span",Lt,o(s.value.file_extension?.toUpperCase()||"Unknown"),1)]),t("div",Ut,[e[8]||(e[8]=t("span",{class:"text-sm font-medium text-gray-700"},"File Size",-1)),t("span",Et,o(V(s.value.file_size_mb)),1)]),s.value.validation_errors&&s.value.validation_errors?.length>0?(l(),i("div",Pt,[e[10]||(e[10]=t("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Validation Issues",-1)),t("div",qt,[(l(!0),i(f,null,h(s.value.validation_errors,(d,_)=>(l(),i("div",{key:_,class:"flex items-center text-sm"},[e[9]||(e[9]=t("div",{class:"w-2 h-2 bg-yellow-500 rounded-full mr-3"},null,-1)),t("span",zt,o(d),1)]))),128))])])):v("",!0),t("div",It,[e[11]||(e[11]=t("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Quality Metrics",-1)),t("div",Ot,[t("div",Qt,[n(r,{name:"success",class:"w-4 h-4 text-green-500 mr-2"}),t("span",Rt,o(s.value.total_samples||0)+" valid samples",1)]),t("div",Gt,[n(r,{name:"chart-bar",class:"w-4 h-4 text-blue-500 mr-2"}),t("span",Jt,o(s.value.medical_domains?.length||0)+" unique domains",1)])])])])])]),_:1})]),s.value.medical_domains&&s.value.medical_domains.length>0?(l(),i("div",Yt,[e[12]||(e[12]=t("div",{class:"medical-card-header"},[t("h2",{class:"text-xl font-semibold text-gray-900"},"Medical Domains"),t("p",{class:"text-sm text-gray-600"},"Distribution of medical domains in this dataset")],-1)),t("div",Kt,[(l(!0),i(f,null,h(s.value.medical_domains,d=>(l(),i("div",{key:d,class:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},[t("div",Wt,[t("h3",Xt,o(C(d)),1),t("span",Ht,o(O(d))+" samples ",1)]),t("div",Zt,[t("div",te,[t("div",{class:"h-2 rounded-full bg-purple-500",style:tt(`width: ${Q(d)}%`)},null,4)])])]))),128))])])):v("",!0),t("div",ee,[e[19]||(e[19]=t("div",{class:"medical-card-header"},[t("h2",{class:"text-xl font-semibold text-gray-900"},"Quick Actions")],-1)),t("div",se,[t("button",{onClick:$,class:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",disabled:!s.value.is_validated},[n(r,{name:"brain",class:"w-6 h-6 text-blue-500 mb-2"}),e[13]||(e[13]=t("h3",{class:"font-medium text-gray-900"},"Train AI Model",-1)),e[14]||(e[14]=t("p",{class:"text-sm text-gray-600 mt-1"},"Create a new classification model",-1))],8,ae),t("button",{onClick:B,class:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left"},[n(r,{name:"success",class:"w-6 h-6 text-green-500 mb-2"}),e[15]||(e[15]=t("h3",{class:"font-medium text-gray-900"},"Validate Dataset",-1)),e[16]||(e[16]=t("p",{class:"text-sm text-gray-600 mt-1"},"Check data quality and structure",-1))]),t("button",{onClick:G,class:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left"},[n(r,{name:"document",class:"w-6 h-6 text-purple-500 mb-2"}),e[17]||(e[17]=t("h3",{class:"font-medium text-gray-900"},"Export Dataset",-1)),e[18]||(e[18]=t("p",{class:"text-sm text-gray-600 mt-1"},"Download in various formats",-1))])])]),t("div",le,[t("div",oe,[t("div",ie,[e[20]||(e[20]=t("div",null,[t("h2",{class:"text-xl font-semibold text-gray-900"},"Dataset Samples"),t("p",{class:"text-sm text-gray-600"},"Preview of articles in this dataset")],-1)),t("div",ne,[t("span",de," Showing "+o(Math.min(p.value,c.value.length))+" of "+o(s.value.total_samples||0),1),c.value.length>p.value?(l(),i("button",{key:0,onClick:z,class:"btn-outline text-sm"}," Load More ")):v("",!0)])])]),k.value?(l(),i("div",re,[n(r,{name:"clock",class:"w-6 h-6 text-blue-500 animate-spin"})])):c.value.length>0?(l(),i("div",ce,[t("table",ue,[e[21]||(e[21]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Title"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Domains"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Journal"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Year"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),t("tbody",me,[(l(!0),i(f,null,h(E.value,d=>(l(),i("tr",{key:d.id,class:"hover:bg-gray-50"},[t("td",xe,[t("div",pe,[t("p",_e,o(d.title),1),t("p",ve,o(d.abstract),1)])]),t("td",ge,[t("div",ye,[(l(!0),i(f,null,h(d.medical_domains?.slice(0,2),_=>(l(),i("span",{key:_,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800"},o(C(_)),1))),128)),d.medical_domains&&d.medical_domains.length>2?(l(),i("span",fe," +"+o(d.medical_domains.length-2),1)):v("",!0)])]),t("td",he,o(d.journal||"N/A"),1),t("td",be,o(d.publication_year||"N/A"),1),t("td",we,[t("button",{onClick:_=>J(d),class:"text-blue-600 hover:text-blue-900"}," View ",8,ke)])]))),128))])])])):(l(),i("div",De,[n(r,{name:"document",class:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e[22]||(e[22]=t("p",{class:"text-gray-500"},"No samples available",-1)),e[23]||(e[23]=t("p",{class:"text-sm text-gray-400 mt-1"},"Upload a file to see dataset samples",-1))]))])])):v("",!0)]))}}),je=st(Ce,[["__scopeId","data-v-04a819a6"]]);export{je as default};
//# sourceMappingURL=DatasetDetail-BiweN4qy.js.map
