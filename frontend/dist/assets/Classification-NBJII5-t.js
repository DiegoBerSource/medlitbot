import{k as j,Y as T,r as A,e as R,a as N,I as D,l as o,J as l,A as e,L as n,y as x,B as f,E as F,Z as p,$ as q,u,F as v,G as y,C as r,_ as k,q as z,z as c,p as P,m as $}from"./vendor-CqXe5Vco.js";import{u as G}from"./models-BXZoxh5i.js";import{u as H}from"./classification-BFQJskH4.js";import{_ as g}from"./index-D07s5EKd.js";import"./utils-DWA4hw-v.js";import"./charts-DqDWejEF.js";const J={class:"p-6"},O={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Y={class:"lg:col-span-2"},Z={class:"bg-white rounded-lg shadow p-6"},K={class:"flex items-center justify-between mb-6"},Q={class:"flex space-x-2"},W=["disabled"],X=["value"],ee={for:"threshold",class:"block text-sm font-medium text-gray-700 mb-2"},te=["disabled"],se={class:"space-y-6"},le={key:0,class:"bg-white rounded-lg shadow p-6"},oe={class:"space-y-4"},ae={class:"text-sm text-gray-900"},ie={key:0},re={class:"flex flex-wrap gap-2"},de={key:1},ne={class:"space-y-2"},ue={class:"text-gray-700"},ce={class:"flex items-center space-x-2"},me={class:"w-20 bg-gray-200 rounded-full h-1.5"},fe={class:"font-mono text-gray-900 w-10 text-right"},be={key:2},xe={class:"text-sm text-gray-900"},pe={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4"},ve={class:"flex items-center"},ye={class:"text-red-700 mt-1 text-sm"},ge={class:"bg-blue-50 rounded-lg p-4"},he={key:0,class:"text-center py-4"},_e={key:1,class:"text-center py-4"},we={key:2,class:"space-y-2"},ke={class:"font-medium text-gray-900"},Ce={class:"text-gray-500"},Me={class:"text-right"},Be={class:"font-medium text-blue-900"},Ee={key:0,class:"text-center pt-2"},Ue=j({__name:"Classification",setup(Se){const C=G(),h=H(),{models:V,loading:M}=T(C),{loading:_,error:B}=T(h),d=A(null),a=A({selectedModelId:"",title:"",abstract:"",threshold:.5}),m=R(()=>V.value.filter(i=>i.is_trained&&i.status==="trained")),L=R(()=>d.value?.confidence_scores?Object.entries(d.value.confidence_scores).sort(([,i],[,t])=>t-i):[]),E=i=>({bert:"BERT",biobert:"BioBERT",clinicalbert:"ClinicalBERT",scibert:"SciBERT",pubmedbert:"PubMedBERT","gemma2-2b":"Gemma 2B",traditional:"Traditional ML",hybrid:"Hybrid",custom:"Custom"})[i]||i.toUpperCase(),S=i=>i.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),I=()=>{h.clearError()},U=async()=>{try{const i=a.value.selectedModelId?Number(a.value.selectedModelId):m.value[0]?.id;if(!i)throw new Error("No trained models available for classification");d.value=await h.classify(i,{title:a.value.title.trim(),abstract:a.value.abstract.trim(),threshold:a.value.threshold})}catch(i){console.error("Classification failed:",i),d.value=null}};return N(()=>{C.fetchModels()}),(i,t)=>{const b=D("RouterLink");return l(),o("div",J,[t[23]||(t[23]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-900"},"Medical Literature Classification"),e("p",{class:"text-gray-600"},"Classify articles into medical domains using trained AI models")],-1)),e("div",O,[e("div",Y,[e("div",Z,[e("div",K,[t[6]||(t[6]=e("h2",{class:"text-lg font-medium text-gray-900"},"Single Article Classification",-1)),e("div",Q,[n(b,{to:"/classification/batch",class:"btn-secondary text-sm"},{default:x(()=>[...t[4]||(t[4]=[f(" Batch Classification ",-1)])]),_:1}),n(b,{to:"/classification/history",class:"btn-secondary text-sm"},{default:x(()=>[...t[5]||(t[5]=[f(" View History ",-1)])]),_:1})])]),e("form",{onSubmit:F(U,["prevent"]),class:"space-y-6"},[e("div",null,[t[8]||(t[8]=e("label",{for:"model-select",class:"block text-sm font-medium text-gray-700 mb-2"}," Select Model ",-1)),p(e("select",{id:"model-select","onUpdate:modelValue":t[0]||(t[0]=s=>a.value.selectedModelId=s),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",disabled:u(M)},[t[7]||(t[7]=e("option",{value:""},"Best Available Model (Auto-select)",-1)),(l(!0),o(v,null,y(m.value,s=>(l(),o("option",{key:s.id,value:s.id},r(s.name)+" ("+r(E(s.model_type))+") - "+r(s.accuracy?(s.accuracy*100).toFixed(1):"0.0")+"% accuracy ",9,X))),128))],8,W),[[q,a.value.selectedModelId]])]),e("div",null,[t[9]||(t[9]=e("label",{for:"title",class:"block text-sm font-medium text-gray-700 mb-2"}," Article Title * ",-1)),p(e("input",{id:"title","onUpdate:modelValue":t[1]||(t[1]=s=>a.value.title=s),type:"text",required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Enter the article title..."},null,512),[[k,a.value.title]])]),e("div",null,[t[10]||(t[10]=e("label",{for:"abstract",class:"block text-sm font-medium text-gray-700 mb-2"}," Article Abstract * ",-1)),p(e("textarea",{id:"abstract","onUpdate:modelValue":t[2]||(t[2]=s=>a.value.abstract=s),required:"",rows:"8",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Enter the article abstract..."},null,512),[[k,a.value.abstract]])]),e("div",null,[e("label",ee," Classification Threshold: "+r(a.value.threshold),1),p(e("input",{id:"threshold","onUpdate:modelValue":t[3]||(t[3]=s=>a.value.threshold=s),type:"range",min:"0.1",max:"0.9",step:"0.1",class:"block w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"},null,512),[[k,a.value.threshold,void 0,{number:!0}]]),t[11]||(t[11]=e("div",{class:"flex justify-between text-xs text-gray-500 mt-1"},[e("span",null,"Less Confident (0.1)"),e("span",null,"More Confident (0.9)")],-1))]),e("div",null,[e("button",{type:"submit",disabled:u(_)||!a.value.title.trim()||!a.value.abstract.trim(),class:"w-full flex justify-center items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[u(_)?(l(),z(g,{key:0,name:"loader",class:"animate-spin w-4 h-4 mr-2"})):c("",!0),f(" "+r(u(_)?"Classifying...":"Classify Article"),1)],8,te)])],32)])]),e("div",se,[d.value?(l(),o("div",le,[t[16]||(t[16]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Classification Result",-1)),e("div",oe,[e("div",null,[t[12]||(t[12]=e("h4",{class:"text-sm font-medium text-gray-700"},"Model Used",-1)),e("p",ae,r(d.value.model_used||"Unknown Model"),1)]),d.value.predicted_domains&&d.value.predicted_domains.length>0?(l(),o("div",ie,[t[13]||(t[13]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Predicted Medical Domains",-1)),e("div",re,[(l(!0),o(v,null,y(d.value.predicted_domains,s=>(l(),o("span",{key:s,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},r(S(s)),1))),128))])])):c("",!0),d.value.confidence_scores?(l(),o("div",de,[t[14]||(t[14]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Confidence Scores",-1)),e("div",ne,[(l(!0),o(v,null,y(L.value,([s,w])=>(l(),o("div",{key:s,class:"flex items-center justify-between text-xs"},[e("span",ue,r(S(s)),1),e("div",ce,[e("div",me,[e("div",{class:$(["h-1.5 rounded-full",w>=a.value.threshold?"bg-green-500":"bg-gray-400"]),style:P(`width: ${w*100}%`)},null,6)]),e("span",fe,r((w*100).toFixed(0))+"%",1)])]))),128))])])):c("",!0),d.value.inference_time_ms?(l(),o("div",be,[t[15]||(t[15]=e("h4",{class:"text-sm font-medium text-gray-700"},"Processing Time",-1)),e("p",xe,r(d.value.inference_time_ms)+"ms",1)])):c("",!0)])])):c("",!0),u(B)?(l(),o("div",pe,[e("div",ve,[n(g,{name:"alert-circle",class:"w-5 h-5 text-red-600 mr-2"}),t[17]||(t[17]=e("h3",{class:"text-red-800 font-medium"},"Classification Error",-1))]),e("p",ye,r(u(B)),1),e("button",{onClick:I,class:"mt-3 text-red-600 hover:text-red-800 text-sm underline"}," Dismiss ")])):c("",!0),e("div",ge,[t[22]||(t[22]=e("h3",{class:"text-lg font-medium text-blue-900 mb-3"},"Available Models",-1)),u(M)?(l(),o("div",he,[n(g,{name:"loader",class:"animate-spin w-6 h-6 mx-auto mb-2 text-blue-600"}),t[18]||(t[18]=e("p",{class:"text-blue-700"},"Loading models...",-1))])):m.value.length===0?(l(),o("div",_e,[n(g,{name:"alert-triangle",class:"w-6 h-6 mx-auto mb-2 text-yellow-600"}),t[20]||(t[20]=e("p",{class:"text-gray-700"},"No trained models available",-1)),n(b,{to:"/models/create",class:"text-blue-600 hover:text-blue-800 text-sm"},{default:x(()=>[...t[19]||(t[19]=[f(" Create a model ",-1)])]),_:1})])):(l(),o("div",we,[(l(!0),o(v,null,y(m.value.slice(0,3),s=>(l(),o("div",{key:s.id,class:"flex items-center justify-between text-sm"},[e("div",null,[e("p",ke,r(s.name),1),e("p",Ce,r(E(s.model_type)),1)]),e("div",Me,[e("p",Be,r(s.accuracy?(s.accuracy*100).toFixed(1):"0.0")+"%",1),t[21]||(t[21]=e("p",{class:"text-gray-500 text-xs"},"accuracy",-1))])]))),128)),m.value.length>3?(l(),o("div",Ee,[n(b,{to:"/models",class:"text-blue-600 hover:text-blue-800 text-sm"},{default:x(()=>[f(" View all "+r(m.value.length)+" models ",1)]),_:1})])):c("",!0)]))])])])])}}});export{Ue as default};
//# sourceMappingURL=Classification-NBJII5-t.js.map
