{"version":3,"file":"ConfusionMatrix-CXdmZwig.js","sources":["../../src/components/charts/ConfusionMatrix.vue"],"sourcesContent":["<template>\n  <div class=\"confusion-matrix-container\">\n    <div class=\"mb-4\">\n      <h3 class=\"text-lg font-semibold text-gray-900 mb-2\">\n        Confusion Matrix\n      </h3>\n      <p class=\"text-sm text-gray-600\" v-if=\"!matrix || matrix.length === 0\">\n        No confusion matrix data available\n      </p>\n    </div>\n    \n    <div v-if=\"matrix && matrix.length > 0\" class=\"confusion-matrix\">\n      <!-- Labels Row -->\n      <div class=\"matrix-labels-row\">\n        <div class=\"label-corner\"></div>\n        <div class=\"predicted-label\">\n          <span>Predicted</span>\n        </div>\n      </div>\n      \n      <!-- Column Headers -->\n      <div class=\"matrix-headers\">\n        <div class=\"actual-label\">\n          <span>Actual</span>\n        </div>\n        <div class=\"matrix-header-row\">\n          <div\n            v-for=\"(label, index) in labels\"\n            :key=\"`col-${index}`\"\n            class=\"matrix-header\"\n            :title=\"label\"\n          >\n            {{ truncateLabel(label) }}\n          </div>\n        </div>\n      </div>\n      \n      <!-- Matrix Grid -->\n      <div class=\"matrix-grid\">\n        <div\n          v-for=\"(row, rowIndex) in matrix\"\n          :key=\"`row-${rowIndex}`\"\n          class=\"matrix-row\"\n        >\n          <!-- Row Label -->\n          <div \n            class=\"matrix-row-label\"\n            :title=\"labels?.[rowIndex] || ''\"\n          >\n            {{ truncateLabel(labels?.[rowIndex] || '') }}\n          </div>\n          \n          <!-- Matrix Cells -->\n          <div\n            v-for=\"(value, colIndex) in row\"\n            :key=\"`cell-${rowIndex}-${colIndex}`\"\n            class=\"matrix-cell\"\n            :class=\"{\n              'diagonal': rowIndex === colIndex,\n              'correct': rowIndex === colIndex && value > 0,\n              'incorrect': rowIndex !== colIndex && value > 0\n            }\"\n            :style=\"getCellStyle(value)\"\n            @click=\"selectCell(rowIndex, colIndex, value)\"\n            :title=\"`${labels[rowIndex]} â†’ ${labels[colIndex]}: ${value}`\"\n          >\n            <span class=\"cell-value\">{{ value }}</span>\n            <div v-if=\"showPercentages\" class=\"cell-percentage\">\n              {{ getPercentage(value, rowIndex) }}%\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <!-- Legend -->\n      <div class=\"matrix-legend\">\n        <div class=\"legend-item\">\n          <div class=\"legend-color correct-prediction\"></div>\n          <span>Correct Predictions</span>\n        </div>\n        <div class=\"legend-item\">\n          <div class=\"legend-color incorrect-prediction\"></div>\n          <span>Incorrect Predictions</span>\n        </div>\n        <div class=\"legend-controls\">\n          <label class=\"legend-control\">\n            <input\n              type=\"checkbox\"\n              v-model=\"showPercentages\"\n            />\n            <span class=\"ml-2\">Show percentages</span>\n          </label>\n        </div>\n      </div>\n      \n      <!-- Selected Cell Details -->\n      <div v-if=\"selectedCell\" class=\"selected-cell-details\">\n        <h4 class=\"font-medium text-gray-900\">Selected Cell Details</h4>\n        <p class=\"text-sm text-gray-600\">\n          <strong>Actual:</strong> {{ labels[selectedCell.row] }}<br>\n          <strong>Predicted:</strong> {{ labels[selectedCell.col] }}<br>\n          <strong>Count:</strong> {{ selectedCell.value }}<br>\n          <strong>Percentage of Row:</strong> {{ getPercentage(selectedCell.value, selectedCell.row) }}%\n        </p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref } from 'vue'\n\ninterface Props {\n  matrix: number[][]\n  labels: string[]\n  title?: string\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  title: 'Confusion Matrix'\n})\n\n// State\nconst showPercentages = ref(false)\nconst selectedCell = ref<{ row: number, col: number, value: number } | null>(null)\n\n// Computed\nconst maxValue = computed(() => {\n  if (!props.matrix || props.matrix.length === 0) return 1\n  return Math.max(...props.matrix.flat())\n})\n\n// Methods\nconst getCellStyle = (value: number) => {\n  if (maxValue.value === 0) return { opacity: '0.1' }\n  \n  const intensity = value / maxValue.value\n  return {\n    opacity: Math.max(0.1, intensity).toString()\n  }\n}\n\nconst getPercentage = (value: number, rowIndex: number) => {\n  if (!props.matrix || !props.matrix[rowIndex]) return 0\n  \n  const rowSum = props.matrix[rowIndex]!.reduce((sum, val) => sum + val, 0)\n  if (rowSum === 0) return 0\n  \n  return Math.round((value / rowSum) * 100)\n}\n\nconst selectCell = (row: number, col: number, value: number) => {\n  selectedCell.value = { row, col, value }\n}\n\nconst truncateLabel = (label: string, maxLength: number = 12) => {\n  if (label.length <= maxLength) return label\n  return label.substring(0, maxLength - 3) + '...'\n}\n</script>\n\n<style scoped>\n.confusion-matrix-container {\n  @apply w-full max-w-4xl mx-auto;\n}\n\n.confusion-matrix {\n  @apply bg-white border border-gray-200 rounded-lg overflow-hidden;\n}\n\n.matrix-labels-row {\n  @apply flex;\n}\n\n.label-corner {\n  @apply w-24 h-8;\n}\n\n.predicted-label {\n  @apply flex-1 flex items-center justify-center bg-blue-50 border-b border-gray-200;\n}\n\n.predicted-label span {\n  @apply text-sm font-medium text-blue-700;\n}\n\n.matrix-headers {\n  @apply flex;\n}\n\n.actual-label {\n  @apply w-24 flex items-center justify-center bg-blue-50 border-r border-gray-200;\n  writing-mode: vertical-rl;\n  text-orientation: mixed;\n}\n\n.actual-label span {\n  @apply text-sm font-medium text-blue-700;\n}\n\n.matrix-header-row {\n  @apply flex flex-1;\n}\n\n.matrix-header {\n  @apply flex-1 min-w-16 max-w-20 p-2 text-xs font-medium text-gray-700 bg-gray-50 border-r border-gray-200 text-center truncate;\n}\n\n.matrix-grid {\n  @apply border-t border-gray-200;\n}\n\n.matrix-row {\n  @apply flex border-b border-gray-200 last:border-b-0;\n}\n\n.matrix-row-label {\n  @apply w-24 p-2 text-xs font-medium text-gray-700 bg-gray-50 border-r border-gray-200 flex items-center justify-center text-center truncate;\n}\n\n.matrix-cell {\n  @apply flex-1 min-w-16 max-w-20 p-2 text-center cursor-pointer border-r border-gray-200 last:border-r-0 transition-all hover:ring-2 hover:ring-blue-500 hover:ring-inset relative;\n}\n\n.matrix-cell.diagonal {\n  @apply bg-green-50;\n}\n\n.matrix-cell.correct {\n  @apply bg-green-100;\n}\n\n.matrix-cell.incorrect {\n  @apply bg-red-50;\n}\n\n.cell-value {\n  @apply text-sm font-medium text-gray-900 block;\n}\n\n.cell-percentage {\n  @apply text-xs text-gray-500;\n}\n\n.matrix-legend {\n  @apply flex items-center justify-between p-4 bg-gray-50 border-t border-gray-200;\n}\n\n.legend-item {\n  @apply flex items-center space-x-2;\n}\n\n.legend-color {\n  @apply w-4 h-4 rounded border border-gray-300;\n}\n\n.legend-color.correct-prediction {\n  @apply bg-green-100;\n}\n\n.legend-color.incorrect-prediction {\n  @apply bg-red-50;\n}\n\n.legend-controls {\n  @apply flex items-center space-x-4;\n}\n\n.legend-control {\n  @apply flex items-center text-sm text-gray-700 cursor-pointer;\n}\n\n.legend-control input[type=\"checkbox\"] {\n  @apply rounded border-gray-300 text-blue-600 focus:ring-blue-500;\n}\n\n.selected-cell-details {\n  @apply mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg;\n}\n</style>\n"],"names":["props","__props","showPercentages","ref","selectedCell","maxValue","computed","getCellStyle","value","intensity","getPercentage","rowIndex","rowSum","sum","val","selectCell","row","col","truncateLabel","label","maxLength","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_cache","matrix","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_Fragment","_renderList","labels","index","_toDisplayString","_hoisted_7","_hoisted_8","_hoisted_9","colIndex","_normalizeStyle","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","$event","_hoisted_16","_hoisted_17","_createTextVNode"],"mappings":"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"}