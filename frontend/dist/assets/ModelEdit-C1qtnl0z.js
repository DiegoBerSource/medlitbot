import{k as P,X as q,r as v,e as S,a as I,I as G,l as d,J as a,z as n,A as e,L as c,C as o,y as C,B as m,m as E,Z as F,_ as R,q as _,E as H}from"./vendor-CqXe5Vco.js";import{b as J,_ as r}from"./index-D07s5EKd.js";import{u as O}from"./models-BXZoxh5i.js";import"./utils-DWA4hw-v.js";import"./charts-DqDWejEF.js";const X={class:"p-6 max-w-4xl mx-auto"},Z={key:0,class:"bg-white rounded-lg shadow p-6"},K={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-6"},Q={class:"flex items-center"},W={class:"text-red-700 mt-1"},Y={class:"mt-4 space-x-3"},ee={key:2},te={class:"mb-8"},se={class:"flex justify-between items-start"},le={class:"mt-2 text-gray-600"},ae={class:"mt-2 flex items-center space-x-4"},oe={class:"text-sm text-gray-500"},de=["disabled"],ne={key:0,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6"},re={class:"flex items-center"},ie={class:"medical-card"},ue={class:"space-y-6"},ce=["disabled"],me={key:0,class:"mt-1 text-sm text-red-600"},ve=["disabled"],be={class:"medical-card"},pe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ge={class:"p-3 bg-gray-50 rounded-md border"},xe={class:"font-medium"},fe={class:"p-3 bg-gray-50 rounded-md border"},ye={class:"font-medium"},_e={key:0},he={class:"p-3 bg-gray-50 rounded-md border"},ke={key:1},we={class:"p-3 bg-gray-50 rounded-md border"},Me={key:0,class:"medical-card"},Ce={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},Te={key:0},De={class:"p-3 bg-green-50 rounded-md border border-green-200"},Be={class:"text-lg font-bold text-green-800"},Se={key:1},Ee={class:"p-3 bg-blue-50 rounded-md border border-blue-200"},Fe={class:"text-lg font-bold text-blue-800"},Re={key:2},ze={class:"p-3 bg-purple-50 rounded-md border border-purple-200"},Ve={class:"text-lg font-bold text-purple-800"},je={key:3},Le={class:"p-3 bg-orange-50 rounded-md border border-orange-200"},$e={class:"text-lg font-bold text-orange-800"},Ae={class:"flex justify-between items-center pt-6 border-t border-gray-200"},Ne={class:"flex space-x-3"},Ue=["disabled"],Pe={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},qe={class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},Ie={class:"p-6"},Ge={class:"flex items-center mb-4"},He={class:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mr-4"},Je={class:"mb-6"},Oe={class:"text-gray-700"},Xe={class:"mt-3 p-3 bg-red-50 rounded-md border border-red-200"},Ze={class:"text-sm text-red-800"},Ke={class:"text-sm text-red-700 mt-2 ml-5 list-disc"},Qe={key:0},We={class:"flex justify-end space-x-3"},Ye=["disabled"],et=["disabled"],dt=P({__name:"ModelEdit",props:{id:{}},setup(z){const h=z,V=q(),f=J(),k=O(),s=v(null),i=v(!1),b=v(!1),p=v(null),g=v({}),y=v(!1),u=v({name:"",description:""}),T=S(()=>s.value?u.value.name!==s.value.name||u.value.description!==s.value.description:!1),j=S(()=>s.value?s.value.accuracy||s.value.f1_score||s.value.precision||s.value.recall:!1),w=async()=>{i.value=!0,p.value=null;try{s.value=await k.fetchModel(h.id),s.value&&(u.value.name=s.value.name,u.value.description=s.value.description)}catch(l){p.value=l instanceof Error?l.message:"Failed to load model",console.error("Failed to fetch model:",l)}finally{i.value=!1}},L=async()=>{if(!(!s.value||!T.value)){i.value=!0,g.value={};try{if(!u.value.name.trim()){g.value.name="Model name is required";return}await k.updateModel(h.id,{name:u.value.name.trim(),description:u.value.description.trim()}),f.success("Model updated successfully!"),await w()}catch(l){const t=l instanceof Error?l.message:"Failed to update model";p.value=t,f.error(t)}finally{i.value=!1}}},$=async()=>{if(s.value){b.value=!0;try{await k.deleteModel(h.id),f.success(`Model "${s.value.name}" deleted successfully!`),V.push("/models")}catch(l){const t=l instanceof Error?l.message:"Failed to delete model";f.error(t),console.error("Failed to delete model:",l)}finally{b.value=!1,y.value=!1}}},D=l=>({bert:"BERT",biobert:"BioBERT",clinicalbert:"ClinicalBERT",scibert:"SciBERT",pubmedbert:"PubMedBERT","gemma2-2b":"Gemma 2B",traditional:"Traditional ML",hybrid:"Hybrid",custom:"Custom"})[l]||l.toUpperCase(),A=l=>({created:"Created",training:"Training",trained:"Trained",failed:"Failed",optimizing:"Optimizing"})[l]||l,N=l=>({created:"bg-gray-100 text-gray-800",training:"bg-yellow-100 text-yellow-800",trained:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",optimizing:"bg-blue-100 text-blue-800"})[l]||"bg-gray-100 text-gray-800",U=l=>({created:"plus-circle",training:"clock",trained:"check-circle",failed:"x-circle",optimizing:"zap"})[l]||"circle",B=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return I(()=>{w()}),(l,t)=>{const M=G("RouterLink");return a(),d("div",X,[i.value&&!s.value?(a(),d("div",Z,[...t[4]||(t[4]=[e("div",{class:"text-center py-12"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e("p",{class:"text-gray-500"},"Loading model details...")],-1)])])):p.value?(a(),d("div",K,[e("div",Q,[c(r,{name:"alert-circle",class:"w-5 h-5 text-red-600 mr-2"}),t[5]||(t[5]=e("h3",{class:"text-red-800 font-medium"},"Error loading model",-1))]),e("p",W,o(p.value),1),e("div",Y,[e("button",{onClick:w,class:"btn-secondary"},"Try Again"),c(M,{to:"/models",class:"btn-outline"},{default:C(()=>[...t[6]||(t[6]=[m("Back to Models",-1)])]),_:1})])])):s.value?(a(),d("div",ee,[e("div",te,[e("div",se,[e("div",null,[t[7]||(t[7]=e("h1",{class:"text-3xl font-bold text-gray-900"},"Edit Model",-1)),e("p",le,o(s.value.name),1),e("div",ae,[e("span",{class:E(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",N(s.value.status)])},[c(r,{name:U(s.value.status),class:"w-3 h-3 mr-1"},null,8,["name"]),m(" "+o(A(s.value.status)),1)],2),e("span",oe,o(D(s.value.model_type)),1)])]),e("button",{onClick:t[0]||(t[0]=x=>y.value=!0),class:"btn-danger",disabled:i.value||s.value.status==="training"},[c(r,{name:"trash",class:"w-4 h-4 mr-2"}),t[8]||(t[8]=m(" Delete Model ",-1))],8,de)])]),s.value.status==="training"?(a(),d("div",ne,[e("div",re,[c(r,{name:"alert-triangle",class:"w-5 h-5 text-yellow-600 mr-2"}),t[9]||(t[9]=e("p",{class:"text-yellow-800"},[e("strong",null,"Model is currently training."),m(" Some settings cannot be modified while training is in progress. ")],-1))])])):n("",!0),e("form",{onSubmit:H(L,["prevent"]),class:"space-y-8"},[e("div",ie,[t[12]||(t[12]=e("div",{class:"medical-card-header"},[e("h2",{class:"text-xl font-semibold text-gray-900"},"Basic Information"),e("p",{class:"text-sm text-gray-600"},"Update model name and description")],-1)),e("div",ue,[e("div",null,[t[10]||(t[10]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-2"}," Model Name * ",-1)),F(e("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=x=>u.value.name=x),type:"text",required:"",class:E(["input-field",{"border-red-500":g.value.name}]),disabled:i.value},null,10,ce),[[R,u.value.name]]),g.value.name?(a(),d("p",me,o(g.value.name),1)):n("",!0)]),e("div",null,[t[11]||(t[11]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"}," Description ",-1)),F(e("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=x=>u.value.description=x),rows:"3",class:"input-field",disabled:i.value,placeholder:"Describe the model's purpose and expected use cases..."},null,8,ve),[[R,u.value.description]])])])]),e("div",be,[t[17]||(t[17]=e("div",{class:"medical-card-header"},[e("h2",{class:"text-xl font-semibold text-gray-900"},"Model Configuration"),e("p",{class:"text-sm text-gray-600"},"Current model settings (read-only)")],-1)),e("div",pe,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Model Type",-1)),e("div",ge,[e("span",xe,o(D(s.value.model_type)),1)])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Dataset",-1)),e("div",fe,[e("span",ye,o(s.value.dataset_name||`Dataset ${s.value.dataset}`),1)])]),s.value.created_at?(a(),d("div",_e,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Created",-1)),e("div",he,[e("span",null,o(B(s.value.created_at)),1)])])):n("",!0),s.value.training_completed_at?(a(),d("div",ke,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Training Completed",-1)),e("div",we,[e("span",null,o(B(s.value.training_completed_at)),1)])])):n("",!0)])]),s.value.is_trained&&j.value?(a(),d("div",Me,[t[22]||(t[22]=e("div",{class:"medical-card-header"},[e("h2",{class:"text-xl font-semibold text-gray-900"},"Performance Metrics"),e("p",{class:"text-sm text-gray-600"},"Current model performance")],-1)),e("div",Ce,[s.value.accuracy?(a(),d("div",Te,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Accuracy",-1)),e("div",De,[e("span",Be,o((s.value.accuracy*100).toFixed(1))+"%",1)])])):n("",!0),s.value.f1_score?(a(),d("div",Se,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"F1 Score",-1)),e("div",Ee,[e("span",Fe,o((s.value.f1_score*100).toFixed(1))+"%",1)])])):n("",!0),s.value.precision?(a(),d("div",Re,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Precision",-1)),e("div",ze,[e("span",Ve,o((s.value.precision*100).toFixed(1))+"%",1)])])):n("",!0),s.value.recall?(a(),d("div",je,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recall",-1)),e("div",Le,[e("span",$e,o((s.value.recall*100).toFixed(1))+"%",1)])])):n("",!0)])])):n("",!0),e("div",Ae,[c(M,{to:"/models",class:"btn-outline"},{default:C(()=>[c(r,{name:"arrow-left",class:"w-4 h-4 mr-2"}),t[23]||(t[23]=m(" Back to Models ",-1))]),_:1}),e("div",Ne,[c(M,{to:`/models/${s.value.id}`,class:"btn-secondary"},{default:C(()=>[c(r,{name:"eye",class:"w-4 h-4 mr-2"}),t[24]||(t[24]=m(" View Details ",-1))]),_:1},8,["to"]),e("button",{type:"submit",class:"btn-primary",disabled:i.value||!T.value},[i.value?(a(),_(r,{key:0,name:"clock",class:"w-4 h-4 mr-2 animate-spin"})):(a(),_(r,{key:1,name:"save",class:"w-4 h-4 mr-2"})),m(" "+o(i.value?"Saving...":"Save Changes"),1)],8,Ue)])])],32)])):n("",!0),y.value?(a(),d("div",Pe,[e("div",qe,[e("div",Ie,[e("div",Ge,[e("div",He,[c(r,{name:"alert-triangle",class:"w-6 h-6 text-red-600"})]),t[25]||(t[25]=e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900"},"Delete Model"),e("p",{class:"text-sm text-gray-500"},"This action cannot be undone")],-1))]),e("div",Je,[e("p",Oe,[t[26]||(t[26]=m(" Are you sure you want to delete ",-1)),e("strong",null,'"'+o(s.value?.name)+'"',1),t[27]||(t[27]=m("? ",-1))]),e("div",Xe,[e("p",Ze,[c(r,{name:"alert-circle",class:"w-4 h-4 inline mr-1"}),t[28]||(t[28]=m(" This will permanently delete: ",-1))]),e("ul",Ke,[t[29]||(t[29]=e("li",null,"The model configuration",-1)),t[30]||(t[30]=e("li",null,"All training data and checkpoints",-1)),t[31]||(t[31]=e("li",null,"Performance metrics and history",-1)),s.value?.status==="training"?(a(),d("li",Qe,"The current training job")):n("",!0)])])]),e("div",We,[e("button",{onClick:t[3]||(t[3]=x=>y.value=!1),class:"btn-outline",disabled:b.value}," Cancel ",8,Ye),e("button",{onClick:$,class:"btn-danger",disabled:b.value},[b.value?(a(),_(r,{key:0,name:"clock",class:"w-4 h-4 mr-2 animate-spin"})):(a(),_(r,{key:1,name:"trash",class:"w-4 h-4 mr-2"})),m(" "+o(b.value?"Deleting...":"Delete Model"),1)],8,et)])])])])):n("",!0)])}}});export{dt as default};
//# sourceMappingURL=ModelEdit-C1qtnl0z.js.map
