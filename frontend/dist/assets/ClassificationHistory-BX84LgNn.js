import{k as I,Y as A,r as h,e as k,w as O,a as Y,I as G,l,J as a,A as e,L as b,y as P,B as y,Z as M,_ as J,$ as E,F as p,G as w,C as n,u,z as m,p as Q,m as Z}from"./vendor-CqXe5Vco.js";import{u as K}from"./classification-BFQJskH4.js";import{u as W}from"./models-BXZoxh5i.js";import{_ as L}from"./index-D07s5EKd.js";import"./utils-DWA4hw-v.js";import"./charts-DqDWejEF.js";const X={class:"p-6"},ee={class:"mb-6 flex justify-between items-center"},te={class:"bg-white rounded-lg shadow p-6 mb-6"},se={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},oe=["value"],le=["value"],ae={key:0,class:"bg-white rounded-lg shadow p-12"},ne={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-6 mb-6"},ie={class:"flex items-center"},re={class:"text-red-700 mt-1"},de={key:2,class:"bg-white rounded-lg shadow p-12"},ce={class:"text-center"},ue={class:"text-lg font-medium text-gray-900 mb-2"},me={class:"text-gray-500 mb-4"},fe={key:3,class:"space-y-6"},ve={class:"bg-blue-50 rounded-lg p-4"},ge={class:"flex items-center justify-between"},_e={class:"font-medium text-blue-900"},xe={class:"text-blue-700 text-sm"},he={class:"grid grid-cols-1 gap-6"},be={class:"p-6"},ye={class:"flex justify-between items-start mb-4"},pe={class:"flex-1"},we={class:"text-lg font-medium text-gray-900 mb-1"},ke={class:"text-sm text-gray-500"},Ce={class:"flex items-center space-x-2"},Se={key:0,class:"text-xs text-gray-400"},Me=["onClick"],Le={class:"mb-4"},Fe={key:0,class:"flex flex-wrap gap-2"},Ne={key:0,class:"ml-1 text-green-600"},De={key:1,class:"text-sm text-gray-400"},je={key:0,class:"border-t pt-4 mt-4 space-y-4"},Te={class:"text-sm text-gray-600 bg-gray-50 rounded p-3"},Ve={key:0},Ae={class:"space-y-2"},Pe={class:"text-gray-700 min-w-0 flex-1"},Ee={class:"flex items-center space-x-2 ml-4"},Ue={class:"w-20 bg-gray-200 rounded-full h-1.5"},Be={class:"font-mono text-gray-900 w-10 text-right"},Re={class:"grid grid-cols-2 gap-4 text-xs text-gray-500"},$e={key:0},ze={key:0,class:"text-center"},Qe=I({__name:"ClassificationHistory",setup(qe){const F=K(),N=W(),{predictions:_,loading:D,error:j}=A(F),{models:U}=A(N),f=h(""),v=h(""),g=h(""),c=h(10),x=h(new Set),B=k(()=>U.value.filter(o=>o.is_trained)),R=k(()=>{const o=new Set;return _.value.forEach(t=>{t.predicted_domains?.forEach(i=>o.add(i))}),Array.from(o).sort()}),r=k(()=>{let o=[..._.value];if(f.value.trim()){const t=f.value.toLowerCase();o=o.filter(i=>i.title?.toLowerCase().includes(t)||i.abstract?.toLowerCase().includes(t))}return v.value&&(o=o.filter(t=>t.model===Number(v.value))),g.value&&(o=o.filter(t=>t.predicted_domains?.includes(g.value))),o}),$=k(()=>r.value.slice(0,c.value)),T=async()=>{try{await F.fetchPredictions()}catch(o){console.error("Failed to load predictions:",o)}},V=()=>{c.value+=10},z=o=>{x.value.has(o)?x.value.delete(o):x.value.add(o)},q=o=>{const t=new Date(o);return t.toLocaleDateString()+" at "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},C=o=>o.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),H=o=>Object.entries(o).sort(([,t],[,i])=>i-t);return O([f,v,g],()=>{c.value=10}),Y(()=>{T(),N.fetchModels()}),(o,t)=>{const i=G("RouterLink");return a(),l("div",X,[e("div",ee,[t[4]||(t[4]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Classification History"),e("p",{class:"text-gray-600"},"View your past medical literature classification results")],-1)),b(i,{to:"/classification",class:"btn-primary"},{default:P(()=>[...t[3]||(t[3]=[y(" New Classification ",-1)])]),_:1})]),e("div",te,[e("div",se,[e("div",null,[t[5]||(t[5]=e("label",{for:"search",class:"block text-sm font-medium text-gray-700 mb-2"}," Search by title or abstract ",-1)),M(e("input",{id:"search","onUpdate:modelValue":t[0]||(t[0]=s=>f.value=s),type:"text",placeholder:"Search classifications...",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[J,f.value]])]),e("div",null,[t[7]||(t[7]=e("label",{for:"model-filter",class:"block text-sm font-medium text-gray-700 mb-2"}," Filter by model ",-1)),M(e("select",{id:"model-filter","onUpdate:modelValue":t[1]||(t[1]=s=>v.value=s),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},[t[6]||(t[6]=e("option",{value:""},"All Models",-1)),(a(!0),l(p,null,w(B.value,s=>(a(),l("option",{key:s.id,value:s.id},n(s.name),9,oe))),128))],512),[[E,v.value]])]),e("div",null,[t[9]||(t[9]=e("label",{for:"domain-filter",class:"block text-sm font-medium text-gray-700 mb-2"}," Filter by domain ",-1)),M(e("select",{id:"domain-filter","onUpdate:modelValue":t[2]||(t[2]=s=>g.value=s),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},[t[8]||(t[8]=e("option",{value:""},"All Domains",-1)),(a(!0),l(p,null,w(R.value,s=>(a(),l("option",{key:s,value:s},n(C(s)),9,le))),128))],512),[[E,g.value]])])])]),u(D)?(a(),l("div",ae,[...t[10]||(t[10]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e("p",{class:"text-gray-500"},"Loading classification history...")],-1)])])):u(j)?(a(),l("div",ne,[e("div",ie,[b(L,{name:"alert-circle",class:"w-5 h-5 text-red-600 mr-2"}),t[11]||(t[11]=e("h3",{class:"text-red-800 font-medium"},"Error loading history",-1))]),e("p",re,n(u(j)),1),e("button",{onClick:T,class:"mt-3 btn-secondary"}," Try Again ")])):r.value.length===0&&!u(D)?(a(),l("div",de,[e("div",ce,[b(L,{name:"document-text",class:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e("h3",ue,n(u(_).length===0?"No classifications yet":"No results found"),1),e("p",me,n(u(_).length===0?"Start classifying medical literature to see results here":"Try adjusting your search or filter criteria"),1),b(i,{to:"/classification",class:"btn-primary"},{default:P(()=>[y(n(u(_).length===0?"Create Your First Classification":"New Classification"),1)]),_:1})])])):(a(),l("div",fe,[e("div",ve,[e("div",ge,[e("div",null,[e("h3",_e,n(r.value.length)+" classification"+n(r.value.length!==1?"s":"")+" "+n(f.value||v.value||g.value?"found":"total"),1),e("p",xe," Showing "+n(Math.min(c.value,r.value.length))+" results ",1)]),r.value.length>c.value?(a(),l("button",{key:0,onClick:V,class:"btn-secondary text-sm"}," Load More ")):m("",!0)])]),e("div",he,[(a(!0),l(p,null,w($.value,s=>(a(),l("div",{key:s.id,class:"bg-white rounded-lg shadow hover:shadow-md transition-shadow duration-200"},[e("div",be,[e("div",ye,[e("div",pe,[e("h3",we,n(s.title),1),e("p",ke,n(q(s.created_at))+" â€¢ Model: "+n(s.model_name||"Unknown"),1)]),e("div",Ce,[s.inference_time_ms?(a(),l("span",Se,n(s.inference_time_ms.toFixed(1))+"ms ",1)):m("",!0),e("button",{onClick:d=>z(s.id),class:"text-gray-400 hover:text-gray-600"},[b(L,{name:x.value.has(s.id)?"chevron-up":"chevron-down",class:"w-5 h-5"},null,8,["name"])],8,Me)])]),e("div",Le,[t[12]||(t[12]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Predicted Domains",-1)),s.predicted_domains&&s.predicted_domains.length>0?(a(),l("div",Fe,[(a(!0),l(p,null,w(s.predicted_domains,d=>(a(),l("span",{key:d,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},[y(n(C(d))+" ",1),s.confidence_scores&&s.confidence_scores[d]?(a(),l("span",Ne," ("+n(((s.confidence_scores?.[d]||0)*100).toFixed(0))+"%) ",1)):m("",!0)]))),128))])):(a(),l("p",De,"No domains predicted"))]),x.value.has(s.id)?(a(),l("div",je,[e("div",null,[t[13]||(t[13]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Abstract",-1)),e("p",Te,n(s.abstract||"No abstract available"),1)]),s.confidence_scores&&Object.keys(s.confidence_scores).length>0?(a(),l("div",Ve,[t[14]||(t[14]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Confidence Scores",-1)),e("div",Ae,[(a(!0),l(p,null,w(H(s.confidence_scores),([d,S])=>(a(),l("div",{key:d,class:"flex items-center justify-between text-xs"},[e("span",Pe,n(C(d)),1),e("div",Ee,[e("div",Ue,[e("div",{class:Z(["h-1.5 rounded-full",S>=(s.prediction_threshold||.5)?"bg-green-500":"bg-gray-400"]),style:Q(`width: ${S*100}%`)},null,6)]),e("span",Be,n((S*100).toFixed(0))+"%",1)])]))),128))])])):m("",!0),e("div",Re,[e("div",null,[t[15]||(t[15]=e("span",{class:"font-medium"},"Threshold:",-1)),y(" "+n(((s.prediction_threshold||.5)*100).toFixed(0))+"% ",1)]),s.inference_time_ms?(a(),l("div",$e,[t[16]||(t[16]=e("span",{class:"font-medium"},"Processing Time:",-1)),y(" "+n(s.inference_time_ms.toFixed(1))+"ms ",1)])):m("",!0)])])):m("",!0)])]))),128))]),r.value.length>c.value?(a(),l("div",ze,[e("button",{onClick:V,class:"btn-secondary"}," Load More Results ("+n(r.value.length-c.value)+" remaining) ",1)])):m("",!0)]))])}}});export{Qe as default};
//# sourceMappingURL=ClassificationHistory-BX84LgNn.js.map
