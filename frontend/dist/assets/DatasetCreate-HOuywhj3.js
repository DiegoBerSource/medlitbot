import{k as A,X as E,r as i,e as L,a as R,l as d,J as n,A as t,Z as m,z as D,_ as q,m as S,C as u,$ as O,F as X,G as J,N as G,E as g,L as h,B as F,p as H,a0 as x,q as V}from"./vendor-CqXe5Vco.js";import{b as Z,s as K,_ as f,a as Q}from"./index-D07s5EKd.js";import{u as W}from"./datasets-Bt4WZcQM.js";import"./utils-DWA4hw-v.js";import"./charts-DqDWejEF.js";const Y={class:"p-6 max-w-4xl mx-auto"},ee={class:"medical-card"},te={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},se={key:0,class:"mt-1 text-sm text-red-600"},ae=["value"],le=["value"],oe={class:"medical-card"},re={key:0},ne={key:1,class:"text-left max-w-md mx-auto"},ie={class:"flex items-start space-x-3"},de={class:"flex-1"},ue={class:"font-medium text-gray-900"},ce={class:"text-sm text-gray-600"},me={key:0,class:"mt-2 text-sm text-red-600"},pe={key:1,class:"mt-4"},ve={class:"flex justify-between text-sm text-gray-700 mb-1"},xe={class:"w-full bg-gray-200 rounded-full h-2"},fe={class:"medical-card"},be={class:"space-y-4"},ye={class:"space-y-2"},ge={class:"flex items-center"},ke={class:"flex items-center"},_e={class:"flex items-center"},De={class:"space-y-2"},he={class:"flex items-center"},Ce={class:"flex items-center"},we={class:"flex items-center justify-between pt-6 border-t border-gray-200"},Se={class:"flex space-x-3"},Fe=["disabled"],Ve=["disabled"],Ue=A({__name:"DatasetCreate",setup(Me){const U=E(),b=Z(),M=W(),p=i(!1),c=i(0),v=i(!1),o=i(null),y=i(),k=i([]),a=i({name:"",description:"",medical_domains:[]}),r=i({}),C=L(()=>a.value.name.trim()&&o.value&&!Object.keys(r.value).length),_=()=>{if(r.value={},a.value.name.trim()?a.value.name.length<3&&(r.value.name="Dataset name must be at least 3 characters"):r.value.name="Dataset name is required",!o.value)r.value.file="Please select a data file";else{o.value.size>104857600&&(r.value.file="File size must be less than 100MB");const e=[".csv",".json",".xlsx",".xls"],s="."+o.value.name.split(".").pop()?.toLowerCase();e.includes(s)||(r.value.file="File must be CSV, JSON, or Excel format")}},w=()=>{y.value?.click()},z=l=>{const e=l.target;e.files&&e.files[0]&&(o.value=e.files[0],_())},N=l=>{v.value=!1,l.dataTransfer?.files&&l.dataTransfer.files[0]&&(o.value=l.dataTransfer.files[0],_())},B=()=>{o.value=null,y.value&&(y.value.value=""),delete r.value.file},T=l=>`${(l/1048576).toFixed(1)} MB`,$=l=>l.split(".").pop()?.toUpperCase()||"Unknown",I=l=>l.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),P=async()=>{if(_(),!C.value){b.error("Please fix the form errors before submitting");return}p.value=!0,c.value=0;try{const l={name:a.value.name,description:a.value.description||"",file:o.value,medical_domains:a.value.medical_domains},e=await M.createDataset(l,s=>{c.value=s});b.success("Dataset created and file uploaded successfully!"),U.push(`/datasets/${e.id}`)}catch(l){console.error("Failed to create dataset:",l);const e=l.message||l.response?.data?.message||"Failed to create dataset. Please try again.";b.error(e),c.value=0}finally{p.value=!1}},j=async()=>{b.info("Draft saving functionality will be implemented soon")};return R(async()=>{try{k.value=await K.getMedicalDomains()}catch(l){console.error("Failed to load medical domains:",l),k.value=["cardiology","neurology","oncology","gastroenterology","endocrinology","respiratory","infectious_disease","dermatology","psychiatry","orthopedics","radiology","pathology"]}}),(l,e)=>(n(),d("div",Y,[e[29]||(e[29]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-900"},"Create New Dataset"),t("p",{class:"mt-2 text-gray-600"},"Upload medical literature data for AI model training")],-1)),t("form",{onSubmit:g(P,["prevent"]),class:"space-y-8"},[t("div",ee,[e[15]||(e[15]=t("div",{class:"medical-card-header"},[t("h2",{class:"text-xl font-semibold text-gray-900"},"Basic Information"),t("p",{class:"text-sm text-gray-600"},"Provide basic details about your dataset")],-1)),t("div",te,[t("div",null,[e[11]||(e[11]=t("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-2"}," Dataset Name * ",-1)),m(t("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=s=>a.value.name=s),type:"text",required:"",class:S(["input-field",{"border-red-500":r.value.name}]),placeholder:"e.g., Medical Literature Collection 2024"},null,2),[[q,a.value.name]]),r.value.name?(n(),d("p",se,u(r.value.name),1)):D("",!0)]),t("div",null,[e[12]||(e[12]=t("label",{for:"domains",class:"block text-sm font-medium text-gray-700 mb-2"}," Primary Medical Domains ",-1)),m(t("select",{id:"domains","onUpdate:modelValue":e[1]||(e[1]=s=>a.value.medical_domains=s),multiple:"",class:"input-field min-h-[120px]"},[(n(!0),d(X,null,J(k.value,s=>(n(),d("option",{key:s,value:s,class:"py-1"},u(I(s)),9,ae))),128))],512),[[O,a.value.medical_domains]]),e[13]||(e[13]=t("p",{class:"mt-1 text-sm text-gray-500"},"Hold Ctrl/Cmd to select multiple domains",-1))])]),t("div",null,[e[14]||(e[14]=t("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"}," Description ",-1)),t("textarea",{id:"description",value:a.value.description||"",onInput:e[2]||(e[2]=s=>a.value.description=s.target.value),rows:"3",class:"input-field",placeholder:"Describe the dataset contents, sources, and intended use cases..."},null,40,le)])]),t("div",oe,[e[20]||(e[20]=G('<div class="medical-card-header" data-v-dddcc70c><h2 class="text-xl font-semibold text-gray-900" data-v-dddcc70c>Data Upload</h2><p class="text-sm text-gray-600" data-v-dddcc70c>Upload your medical literature data file</p></div><div class="mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg" data-v-dddcc70c><h4 class="text-sm font-medium text-blue-900 mb-1" data-v-dddcc70c>Supported Formats</h4><p class="text-sm text-blue-700" data-v-dddcc70c> CSV, JSON, Excel (XLS, XLSX) • Max size: 100MB </p><p class="text-xs text-blue-600 mt-1" data-v-dddcc70c> Required columns: title, abstract, medical_domains (optional) </p></div>',2)),t("div",{onDragover:e[3]||(e[3]=g(s=>v.value=!0,["prevent"])),onDragleave:e[4]||(e[4]=g(s=>v.value=!1,["prevent"])),onDrop:g(N,["prevent"]),class:S(["border-2 border-dashed rounded-lg p-8 text-center transition-colors",{"border-blue-400 bg-blue-50":v.value,"border-gray-300":!v.value&&!o.value,"border-green-400 bg-green-50":o.value&&!r.value.file}])},[h(f,{name:o.value?"document":"plus",class:"w-12 h-12 mx-auto text-gray-400 mb-4"},null,8,["name"]),o.value?(n(),d("div",ne,[t("div",ie,[h(f,{name:"document",class:"w-6 h-6 text-green-600 mt-1"}),t("div",de,[t("p",ue,u(o.value.name),1),t("p",ce,u(T(o.value.size))+" • "+u($(o.value.name)),1),t("div",{class:"mt-2 flex space-x-2"},[t("button",{type:"button",onClick:B,class:"text-sm text-red-600 hover:text-red-700"}," Remove "),t("button",{type:"button",onClick:w,class:"text-sm text-blue-600 hover:text-blue-700"}," Replace ")])])])])):(n(),d("div",re,[e[17]||(e[17]=t("p",{class:"text-lg font-medium text-gray-900 mb-2"}," Drop your dataset file here ",-1)),e[18]||(e[18]=t("p",{class:"text-gray-600 mb-4"},"or",-1)),t("button",{type:"button",onClick:w,class:"btn-primary inline-flex items-center"},[h(f,{name:"plus",class:"w-4 h-4 mr-2"}),e[16]||(e[16]=F(" Choose File ",-1))]),t("input",{ref_key:"fileInputRef",ref:y,type:"file",accept:".csv,.json,.xlsx,.xls",class:"hidden",onChange:z},null,544)]))],34),r.value.file?(n(),d("p",me,u(r.value.file),1)):D("",!0),c.value>0&&c.value<100?(n(),d("div",pe,[t("div",ve,[e[19]||(e[19]=t("span",null,"Uploading...",-1)),t("span",null,u(c.value)+"%",1)]),t("div",xe,[t("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:H({width:`${c.value}%`})},null,4)])])):D("",!0)]),t("div",fe,[e[28]||(e[28]=t("div",{class:"medical-card-header"},[t("h2",{class:"text-xl font-semibold text-gray-900"},"Advanced Options"),t("p",{class:"text-sm text-gray-600"},"Configure data processing and validation")],-1)),t("div",be,[t("div",null,[e[24]||(e[24]=t("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Data Validation",-1)),t("div",ye,[t("label",ge,[m(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>a.value.validate_structure=s),type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[x,a.value.validate_structure]]),e[21]||(e[21]=t("span",{class:"ml-2 text-sm text-gray-700"}," Validate data structure and format ",-1))]),t("label",ke,[m(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>a.value.check_duplicates=s),type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[x,a.value.check_duplicates]]),e[22]||(e[22]=t("span",{class:"ml-2 text-sm text-gray-700"}," Check for duplicate entries ",-1))]),t("label",_e,[m(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>a.value.extract_domains=s),type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[x,a.value.extract_domains]]),e[23]||(e[23]=t("span",{class:"ml-2 text-sm text-gray-700"}," Auto-extract medical domains from text ",-1))])])]),t("div",null,[e[27]||(e[27]=t("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Text Processing",-1)),t("div",De,[t("label",he,[m(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>a.value.preprocess_text=s),type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[x,a.value.preprocess_text]]),e[25]||(e[25]=t("span",{class:"ml-2 text-sm text-gray-700"}," Clean and preprocess text (remove special characters, normalize) ",-1))]),t("label",Ce,[m(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>a.value.extract_keywords=s),type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[x,a.value.extract_keywords]]),e[26]||(e[26]=t("span",{class:"ml-2 text-sm text-gray-700"}," Extract medical keywords and entities ",-1))])])])])]),t("div",we,[t("button",{type:"button",onClick:e[10]||(e[10]=s=>l.$router.push("/datasets")),class:"btn-secondary"}," Cancel "),t("div",Se,[t("button",{type:"button",onClick:j,class:"btn-outline",disabled:p.value||!a.value.name}," Save Draft ",8,Fe),t("button",{type:"submit",class:"btn-primary",disabled:p.value||!C.value},[p.value?(n(),V(f,{key:0,name:"clock",class:"w-4 h-4 mr-2 animate-spin"})):(n(),V(f,{key:1,name:"plus",class:"w-4 h-4 mr-2"})),F(" "+u(p.value?"Creating...":"Create Dataset"),1)],8,Ve)])])],32)]))}}),Ie=Q(Ue,[["__scopeId","data-v-dddcc70c"]]);export{Ie as default};
//# sourceMappingURL=DatasetCreate-HOuywhj3.js.map
