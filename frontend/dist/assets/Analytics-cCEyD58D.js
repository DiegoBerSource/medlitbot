import{k as R,Y as D,r as S,e as n,w as T,a as P,I as z,l as d,J as m,A as l,L as o,y as v,Z as I,$ as Z,C as p,F as j,G as E,B as b}from"./vendor-CqXe5Vco.js";import{_ as g}from"./index-D07s5EKd.js";import{_ as f}from"./StatCard.vue_vue_type_script_setup_true_lang-DCRGtXQu.js";import{_ as A}from"./ChartCard.vue_vue_type_script_setup_true_lang-zQWhgYwN.js";import{_ as G}from"./RadarChart.vue_vue_type_script_setup_true_lang-Bb8TJrYA.js";import{C as J}from"./ConfusionMatrix-CXdmZwig.js";import{u as O}from"./models-BXZoxh5i.js";import"./utils-DWA4hw-v.js";import"./charts-DqDWejEF.js";const U={class:"p-6"},Y={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},q={class:"grid grid-cols-1 xl:grid-cols-2 gap-8 mb-8"},H={ref:"scatterChart",height:"400"},K={class:"mb-8"},Q={class:"medical-card"},W={class:"mb-6"},X=["disabled"],ee={value:""},ae=["value"],te={key:0},le={key:1,class:"text-center py-8 text-gray-500"},oe={key:2,class:"text-center py-8 text-gray-500"},re={key:3,class:"text-center py-8 text-gray-500"},se={class:"flex justify-center space-x-4"},ye=R({__name:"Analytics",setup(ne){const y=O(),{models:C}=D(y),i=S(!1),u=S(""),t=n(()=>C.value?.filter(a=>a.status==="trained"&&a.is_trained)||[]),c=n(()=>u.value&&t.value.find(a=>a.id.toString()===u.value)||null),M=n(()=>t.value.length),x=n(()=>t.value.length===0?0:t.value.reduce((a,e)=>a+(e.accuracy||0),0)/t.value.length),w=n(()=>t.value.length===0?"N/A":`${(x.value*100).toFixed(1)}%`),_=n(()=>t.value.length===0?0:t.value.reduce((a,e)=>a+(e.f1_score||0),0)/t.value.length),k=n(()=>t.value.length===0?"N/A":`${(_.value*100).toFixed(1)}%`),F=n(()=>t.value.length===0?"N/A":`${(Math.max(...t.value.map(e=>e.accuracy||0))*100).toFixed(1)}%`),$=n(()=>{if(t.value.length===0)return{labels:["Accuracy","F1 Score","Precision","Recall"],datasets:[]};const a=["rgba(59, 130, 246, 0.2)","rgba(16, 185, 129, 0.2)","rgba(245, 158, 11, 0.2)","rgba(239, 68, 68, 0.2)","rgba(139, 92, 246, 0.2)"],e=["rgba(59, 130, 246, 1)","rgba(16, 185, 129, 1)","rgba(245, 158, 11, 1)","rgba(239, 68, 68, 1)","rgba(139, 92, 246, 1)"];return{labels:["Accuracy","F1 Score","Precision","Recall"],datasets:t.value.slice(0,5).map((r,s)=>({label:r.name,data:[(r.accuracy||0)*100,(r.f1_score||0)*100,(r.precision||0)*100,(r.recall||0)*100],backgroundColor:a[s%a.length],borderColor:e[s%e.length],pointBackgroundColor:e[s%e.length]}))}}),N=n(()=>{if(!c.value||!c.value.confusion_matrix)return[];const a=c.value.confusion_matrix.length;return Array.from({length:a},(e,r)=>`Class ${r+1}`)}),V={responsive:!0,maintainAspectRatio:!1,scales:{r:{beginAtZero:!0,max:100,ticks:{stepSize:20}}},plugins:{legend:{position:"bottom"}}},h=a=>a>=.8?"success":a>=.6?"warning":"error",B=async()=>{i.value=!0;try{await y.fetchModels()}catch(a){console.error("Failed to fetch models:",a)}finally{i.value=!1}};return T(t,a=>{if(a.length>0&&!u.value){const e=a.reduce((r,s)=>{const L=r.f1_score||r.accuracy||0;return(s.f1_score||s.accuracy||0)>L?s:r});u.value=e.id.toString()}},{immediate:!0}),P(async()=>{await B()}),(a,e)=>{const r=z("RouterLink");return m(),d("div",U,[e[9]||(e[9]=l("div",{class:"mb-6"},[l("h1",{class:"text-2xl font-bold text-gray-900"},"Analytics"),l("p",{class:"text-gray-600"},"System performance and model insights")],-1)),l("div",Y,[o(f,{label:"Average Accuracy",value:w.value,icon:"chart-bar",color:h(x.value),loading:i.value},null,8,["value","color","loading"]),o(f,{label:"Average F1-Score",value:k.value,icon:"chart-bar",color:h(_.value),loading:i.value},null,8,["value","color","loading"]),o(f,{label:"Best Model Accuracy",value:F.value,icon:"trophy",color:"success",loading:i.value},null,8,["value","loading"]),o(f,{label:"Total Trained Models",value:M.value.toString(),icon:"cpu",color:"primary",loading:i.value},null,8,["value","loading"])]),l("div",q,[o(A,{title:"Model Performance Comparison",loading:i.value},{default:v(()=>[o(G,{data:$.value,options:V,height:400},null,8,["data"])]),_:1},8,["loading"]),o(A,{title:"Accuracy vs F1-Score",loading:i.value},{default:v(()=>[l("canvas",H,null,512)]),_:1},8,["loading"])]),l("div",K,[l("div",Q,[e[6]||(e[6]=l("div",{class:"medical-card-header mb-6"},[l("h3",{class:"text-lg font-semibold text-gray-900"},"Confusion Matrix Analysis"),l("p",{class:"text-sm text-gray-600 mt-1"}," Select a model to view its confusion matrix ")],-1)),l("div",W,[e[1]||(e[1]=l("label",{for:"model-select",class:"block text-sm font-medium text-gray-700 mb-2"}," Select Model: ",-1)),I(l("select",{id:"model-select","onUpdate:modelValue":e[0]||(e[0]=s=>u.value=s),class:"form-select w-full max-w-md",disabled:t.value.length===0},[l("option",ee,p(t.value.length===0?"No trained models available":"Select a model..."),1),(m(!0),d(j,null,E(t.value,s=>(m(),d("option",{key:s.id,value:s.id},p(s.name)+" ("+p(s.f1_score?(s.f1_score*100).toFixed(1):"0.0")+"% F1) ",9,ae))),128))],8,X),[[Z,u.value]])]),c.value&&c.value.confusion_matrix?(m(),d("div",te,[o(J,{matrix:c.value.confusion_matrix,labels:N.value,title:`${c.value.name} - Confusion Matrix`},null,8,["matrix","labels","title"])])):u.value&&c.value?(m(),d("div",le,[o(g,{name:"chart-bar",class:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e[2]||(e[2]=l("p",null,"No confusion matrix data available for this model",-1))])):t.value.length===0?(m(),d("div",oe,[o(g,{name:"cpu",class:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e[4]||(e[4]=l("p",null,"No trained models available",-1)),o(r,{to:"/models/create",class:"text-primary-600 hover:text-primary-700 text-sm"},{default:v(()=>[...e[3]||(e[3]=[b(" Create your first model â†’ ",-1)])]),_:1})])):(m(),d("div",re,[o(g,{name:"chart-bar",class:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e[5]||(e[5]=l("p",null,"Select a model above to view its confusion matrix",-1))]))])]),l("div",se,[o(r,{to:"/analytics/comparison",class:"btn-primary"},{default:v(()=>[o(g,{name:"chart-bar",class:"w-4 h-4 mr-2"}),e[7]||(e[7]=b(" Model Comparison ",-1))]),_:1}),o(r,{to:"/models",class:"btn-secondary"},{default:v(()=>[o(g,{name:"cpu",class:"w-4 h-4 mr-2"}),e[8]||(e[8]=b(" View All Models ",-1))]),_:1})])])}}});export{ye as default};
//# sourceMappingURL=Analytics-cCEyD58D.js.map
