graph TD
    %% Users and External Interfaces
    U1["ğŸ‘¨â€âš•ï¸ MÃ©dicos/Investigadores"]
    U2["ğŸ‘¨â€ğŸ’¼ Administradores IT"]
    U3["ğŸ”— External APIs<br/>(HuggingFace, etc.)"]

    %% Frontend Layer
    subgraph "ğŸŒ Frontend Layer (Vue.js)"
        VUE["Vue 3 + TypeScript<br/>ğŸ“± PWA Support<br/>ğŸ¨ TailwindCSS"]
        
        subgraph "Frontend Components"
            COMP1["ğŸ“Š Analytics Views"]
            COMP2["ğŸ¤– Classification UI"]
            COMP3["ğŸ“ Dataset Management"]
            COMP4["âš™ï¸ Model Training"]
            COMP5["ğŸ“ˆ Real-time Dashboard"]
        end
        
        subgraph "State Management"
            PINIA["Pinia Stores<br/>â€¢ Training Store<br/>â€¢ Models Store<br/>â€¢ Dataset Store<br/>â€¢ WebSocket Store"]
        end
        
        subgraph "Visualization"
            VIZ["Chart.js<br/>â€¢ Performance Metrics<br/>â€¢ Confusion Matrix<br/>â€¢ Model Comparison"]
        end
    end

    %% API Gateway Layer
    subgraph "ğŸŒ‰ API Layer"
        NGINX["Nginx Reverse Proxy<br/>Port Routing & Load Balancing"]
    end

    %% Backend Services
    subgraph "ğŸ­ Backend Services"
        
        subgraph "Django Core (Port 8000)"
            DJANGO["Django 5.2<br/>â€¢ Django Ninja API<br/>â€¢ Admin Interface<br/>â€¢ WebSocket Support"]
            
            subgraph "Django Apps"
                API_APP["ğŸ”Œ API App<br/>REST Endpoints"]
                CLASS_APP["ğŸ¤– Classification App<br/>ML Model Management"]
                DATASET_APP["ğŸ“Š Dataset Management<br/>Data Processing"]
                DASH_APP["ğŸ“ˆ Dashboard App<br/>Analytics Views"]
            end
        end
        
        subgraph "Optional Analytics (Port 8050)"
            PLOTLY["Dash + Plotly<br/>Advanced Analytics<br/>Real-time Charts"]
        end
    end

    %% ML/AI Layer
    subgraph "ğŸ§  Machine Learning Layer"
        
        subgraph "Model Types"
            BERT["ğŸ¥ BERT Models<br/>â€¢ BioBERT<br/>â€¢ ClinicalBERT<br/>â€¢ SciBERT<br/>â€¢ PubMedBERT"]
            GEMMA["âš¡ Google Gemma 2B<br/>Large Language Model"]
            TRAD["ğŸ“Š Traditional ML<br/>â€¢ SVM<br/>â€¢ Random Forest<br/>â€¢ Logistic Regression"]
            HYBRID["ğŸ”„ Hybrid Ensemble<br/>Combined Models"]
        end
        
        subgraph "ML Pipeline"
            TRAIN["ğŸ‹ï¸ Model Training<br/>Hyperparameter Optimization"]
            PRED["ğŸ”® Prediction Engine<br/>Multi-label Classification"]
            EVAL["ğŸ“ Model Evaluation<br/>Metrics & Validation"]
        end
    end

    %% Task Processing
    subgraph "âš™ï¸ Task Processing Layer"
        CELERY["Celery Workers<br/>Asynchronous Tasks"]
        
        subgraph "Task Queues"
            Q1["ğŸ‹ï¸ Training Queue<br/>Model Training Jobs"]
            Q2["ğŸ”® Prediction Queue<br/>Classification Tasks"]
            Q3["ğŸ“Š Processing Queue<br/>Dataset Processing"]
        end
    end

    %% Data Layer
    subgraph "ğŸ’¾ Data Layer"
        
        subgraph "Databases"
            SQLITE["SQLite (Development)<br/>PostgreSQL (Production)<br/>â€¢ Models Metadata<br/>â€¢ Training Jobs<br/>â€¢ User Sessions"]
        end
        
        subgraph "File Storage"
            MEDIA["Media Storage<br/>â€¢ Trained Models (.pkl, .safetensors)<br/>â€¢ Datasets (CSV, JSON)<br/>â€¢ Model Artifacts"]
            STATIC["Static Files<br/>â€¢ Frontend Assets<br/>â€¢ CSS, JS, Images"]
        end
        
        subgraph "Cache & Sessions"
            REDIS["Redis (Optional)<br/>â€¢ Task Broker<br/>â€¢ WebSocket Channels<br/>â€¢ Cache Layer<br/>â€¢ Session Storage"]
        end
    end

    %% Real-time Communication
    subgraph "ğŸ”„ Real-time Layer"
        WS["WebSocket Channels<br/>â€¢ Training Progress<br/>â€¢ Live Updates<br/>â€¢ Notifications"]
    end

    %% Infrastructure
    subgraph "ğŸ—ï¸ Infrastructure Layer"
        DOCKER["Docker Containers<br/>â€¢ App Container<br/>â€¢ Database Container<br/>â€¢ Redis Container"]
        PULUMI["Pulumi IaC<br/>Cloud Deployment<br/>Infrastructure as Code"]
    end

    %% User Flow Connections
    U1 --> VUE
    U2 --> DJANGO
    U3 --> API_APP

    %% Frontend to Backend
    VUE --> NGINX
    NGINX --> DJANGO
    NGINX --> PLOTLY
    
    PINIA --> WS
    VIZ --> API_APP

    %% Django Apps Connections
    DJANGO --> API_APP
    DJANGO --> CLASS_APP
    DJANGO --> DATASET_APP
    DJANGO --> DASH_APP

    %% ML Pipeline
    CLASS_APP --> BERT
    CLASS_APP --> GEMMA
    CLASS_APP --> TRAD
    CLASS_APP --> HYBRID
    
    CLASS_APP --> TRAIN
    CLASS_APP --> PRED
    CLASS_APP --> EVAL

    %% Task Processing
    DJANGO --> CELERY
    CELERY --> Q1
    CELERY --> Q2
    CELERY --> Q3
    
    Q1 --> TRAIN
    Q2 --> PRED
    Q3 --> DATASET_APP

    %% Data Connections
    DJANGO --> SQLITE
    DJANGO --> MEDIA
    DJANGO --> STATIC
    DJANGO --> REDIS
    
    CELERY --> REDIS
    WS --> REDIS
    
    TRAIN --> MEDIA
    PRED --> MEDIA

    %% Infrastructure
    DOCKER --> DJANGO
    DOCKER --> REDIS
    DOCKER --> SQLITE
    PULUMI --> DOCKER

    %% WebSocket Real-time
    WS --> VUE
    TRAIN --> WS
    PRED --> WS

    %% External APIs
    U3 --> BERT
    U3 --> GEMMA

    %% Styling
    classDef userClass fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef frontendClass fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef backendClass fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef mlClass fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef dataClass fill:#fce4ec,stroke:#880e4f,stroke-width:2px
    classDef infraClass fill:#f1f8e9,stroke:#33691e,stroke-width:2px

    class U1,U2,U3 userClass
    class VUE,COMP1,COMP2,COMP3,COMP4,COMP5,PINIA,VIZ frontendClass
    class NGINX,DJANGO,API_APP,CLASS_APP,DATASET_APP,DASH_APP,PLOTLY,CELERY,Q1,Q2,Q3,WS backendClass
    class BERT,GEMMA,TRAD,HYBRID,TRAIN,PRED,EVAL mlClass
    class SQLITE,MEDIA,STATIC,REDIS dataClass
    class DOCKER,PULUMI infraClass
